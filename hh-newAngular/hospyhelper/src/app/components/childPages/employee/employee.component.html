<div class="outer-container">
  <div class="container" *ngIf="employee">
    <div class="d-flex justify-content-between align-item-center">
      <a [routerLink]="['/profilo']" class="arrow m-3"
        ><svg
          xmlns="http://www.w3.org/2000/svg"
          width="25"
          height="25"
          class="bi bi-arrow-left-square-fill"
          viewBox="0 0 16 16"
        >
          <path
            d="M16 14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2zm-4.5-6.5H5.707l2.147-2.146a.5.5 0 1 0-.708-.708l-3 3a.5.5 0 0 0 0 .708l3 3a.5.5 0 0 0 .708-.708L5.707 8.5H11.5a.5.5 0 0 0 0-1"
          /></svg
      ></a>
      <a [routerLink]="['/accommodation']" class="arrow m-3">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="25"
          height="25"
          class="bi bi-arrow-right-square-fill"
          viewBox="0 0 16 16"
        >
          <path
            d="M0 14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2zm4.5-6.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5a.5.5 0 0 1 0-1"
          />
        </svg>
      </a>
    </div>

    <div class="container-fluid">
      <h2 class="elenco">Elenco Impiegati</h2>
      <ul class="list-unstyled">
        <li class="employee" *ngFor="let emp of employee">
          <div class="employee-details row">
            <div class="col-md-6">
              <p class="paragIndex"><strong>Nome Impiegato:</strong></p>
              <p class="paragIndex"><strong>Età:</strong></p>
              <p class="paragIndex"><strong>Email:</strong></p>
              <p class="paragIndex"><strong>Stipendio:</strong></p>
              <p class="paragIndex"><strong>Ruolo:</strong></p>
            </div>
            <div class="col-md-6">
              <p>
                <span class="employeeP">{{ emp.name }} {{ emp.surname }}</span>
              </p>
              <p>
                <span class="employeeP">{{ emp.age }}</span>
              </p>
              <p>
                <span class="employeeP">{{ emp.email }}</span>
              </p>
              <p>
                <span class="employeeP">{{ emp.salary }}</span>
              </p>
              <p>
                <span class="employeeP">{{ emp.roleEmployee }}</span>
              </p>
            </div>
          </div>
          <div *ngIf="emp.showDetails">
            <button class="btn btn-secondary" (click)="editEmp(emp)">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-pencil-fill"
                viewBox="0 0 16 16"
              >
                <path
                  d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"
                />
              </svg>
            </button>
            <button class="btn btn-dark ms-2" (click)="deleteEmployee(emp)">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-trash2-fill"
                viewBox="0 0 16 16"
              >
                <path
                  d="M2.037 3.225A.7.7 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2a.7.7 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671zm9.89-.69C10.966 2.214 9.578 2 8 2c-1.58 0-2.968.215-3.926.534-.477.16-.795.327-.975.466.18.14.498.307.975.466C5.032 3.786 6.42 4 8 4s2.967-.215 3.926-.534c.477-.16.795-.327.975-.466-.18-.14-.498-.307-.975-.466z"
                />
              </svg>
            </button>
          </div>
        </li>
      </ul>
      <div class="d-flex justify-content-center mt-5">
        <button
          class="me-3"
          (click)="prevPage()"
          [disabled]="currentPage === 0"
        >
          Previous
        </button>
        <button
          class="ms-3"
          (click)="nextPage()"
          [disabled]="currentPage === totalPages - 1"
        >
          Next
        </button>
      </div>
      <div class="mt-5">
        <p class="pulse-animation">
          Prima di aggiungere un nuovo dipendente seleziona la struttura
        </p>
        <div
          class="bottoni d-flex justify-content-between align-items-center pb-5 mt-3"
        >
          <div class="dropdown">
            <button
              class="btn btn-secondary dropdown-toggle"
              type="button"
              id="accommodationDropdown"
              data-bs-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              Seleziona un alloggio
            </button>
            <div class="dropdown-menu" aria-labelledby="accommodationDropdown">
              <a
                class="dropdown-item"
                *ngFor="let acc of accommodation"
                (click)="selectAccommodation(acc)"
                >{{ acc.name }}</a
              >
            </div>
          </div>

          <button
            id="addButton"
            class="btn button-85 my-2"
            role="button"
            (click)="toggleCardVisibility()"
          >
            Aggiungi Dipendente
          </button>
          <button
            class="btn button-85 my-2"
            (click)="toggleTotalSalaryVisibility()"
          >
            Mostra totale Stipendi
          </button>
          <span *ngIf="showTotalSalary"
            >Somma degli stipendi: {{ totalSalary }}</span
          >
        </div>
      </div>
      <!-- NewEmployee******************************************************************************************** -->
      <div class="d-flex justify-content-between align-item">
        <div class="col-md-3">
          <div class="card card-front" *ngIf="showCard">
            <div class="card-body">
              <h5 class="card-title">Aggiungi Dipendente</h5>
              <form>
                <div class="form-group">
                  <label for="newDipendente">Nome Dipendente</label>
                  <input
                    type="text"
                    class="form-control"
                    id="newDipendente"
                    name="newDipendente"
                    [(ngModel)]="newEmployee.name"
                  />
                </div>
                <div class="form-group">
                  <label for="newSurname">Cognome Dipendente</label>
                  <input
                    type="text"
                    class="form-control"
                    id="newSurname"
                    name="newSurname"
                    [(ngModel)]="newEmployee.surname"
                  />
                </div>
                <div class="form-group">
                  <label for="newAge">Età</label>
                  <input
                    type="text"
                    class="form-control"
                    id="newAge"
                    name="newAge"
                    [(ngModel)]="newEmployee.age"
                  />
                </div>
                <div class="form-group">
                  <label for="newEmail">Email</label>
                  <input
                    type="email"
                    class="form-control"
                    id="newEmail"
                    name="newEmail"
                    [(ngModel)]="newEmployee.email"
                  />
                </div>
                <div class="form-group">
                  <label for="newSalary">Stipendio</label>
                  <input
                    type="number"
                    class="form-control"
                    id="newSalary"
                    name="newSalary"
                    [(ngModel)]="newEmployee.salary"
                  />
                </div>
                <div class="form-group">
                  <label for="newRole">Ruolo</label>
                  <select
                    class="form-control"
                    id="newRole"
                    name="newRole"
                    [(ngModel)]="newEmployee.roleEmployee"
                  >
                    <option value="RECEPTIONIST">Receptionist</option>
                    <option value="CONCIERGE">Concierge</option>
                    <option value="CLEANER">Cleaner</option>
                    <option value="HR">HR</option>
                    <option value="WAITER">Waiter</option>
                    <option value="WAITRESS">Waitress</option>
                    <option value="MANAGER">Manager</option>
                    <option value="CHEF">Chef</option>
                    <option value="KITCHEN_PORTER">Kitchen Porter</option>
                  </select>
                </div>
                <div class="d-flex justify-content-between align-item mt-3">
                  <button class="btn btn-secondary" (click)="addNewEmployee()">
                    Aggiungi
                  </button>
                  <button class="btn btn-dark" (click)="close()">chiudi</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- UPDATE******************************************************************************** -->

      <div class="col-md-3" *ngIf="editingEmployee">
        <div class="card card-front">
          <div class="card-body">
            <h5 class="card-title">Modifica Prenotazione</h5>
            <form>
              <div class="form-group">
                <label for="editName">Nome</label>
                <input
                  type="text"
                  class="form-control"
                  id="editName"
                  name="editName"
                  [(ngModel)]="editingEmployee.name"
                />
              </div>
              <div class="form-group">
                <label for="editSurname">Cognome</label>
                <input
                  type="text"
                  class="form-control"
                  id="editSurname"
                  name="editSurname"
                  [(ngModel)]="editingEmployee.surname"
                />
              </div>

              <div class="form-group">
                <label for="editAge">Età</label>
                <input
                  type="number"
                  class="form-control"
                  id="editAge"
                  name="editAge"
                  [(ngModel)]="editingEmployee.age"
                />
              </div>

              <div class="form-group">
                <label for="editEmail">Email</label>
                <input
                  type="email"
                  class="form-control"
                  id="editEmail"
                  name="editEmail"
                  [(ngModel)]="editingEmployee.email"
                />
              </div>

              <div class="form-group">
                <label for="editSalary">Stipendio</label>
                <input
                  type="number"
                  class="form-control"
                  id="editSalary"
                  name="editSalary"
                  [(ngModel)]="editingEmployee.salary"
                />
              </div>

              <div class="form-group">
                <label for="editRole">Ruolo</label>
                <select
                  class="form-control"
                  id="editRole"
                  name="editRole"
                  [(ngModel)]="editingEmployee.roleEmployee"
                >
                  <option *ngFor="let role of roles" [value]="role">
                    {{ role }}
                  </option>
                </select>
              </div>
            </form>
            <div class="d-flex justify-content-between align-item-center mt-2">
              <button class="btn btn-secondary" (click)="saveEditedEmployee()">
                Salva
              </button>
              <button class="btn btn-dark" (click)="cancelEdit()">
                Annulla
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
